---
layout: post
title:  "理解js中的原型、构造函数、实例的关系"
date:   2019-06-06 22:26:23 +0800
categories: h5
---

JS中的对象是要靠原型来生成，那一个原型里面都有哪些信息呢？

通过一个隐藏的内部属性\_\_proto\_\_就可以得到这个对象的隐式原型对象。

首先会有个构造器constructor，这个构造器指向一个函数，此函数就是这个对象的构造函数, 以及一些常用函数，如toStrig、hasOwnProperty等，以及__proto\_\_的get和set访问器等。

有了这些东西，就能生成一个对象了。



函数也是对象，那么函数就应该也有一个\_\_proto\_\_属性。

函数是一个特殊的对象，因为通过函数我们能生成其他对象，有一个函数对象特有的属性叫prototype，这个对象中包含了此函数作为构造函数生成的实例们共享的方法和变量，叫做这个函数的原型对象。

再回头看上面介绍的普通的对象的\_\_proto\_\_属性，实际上它就指向其构造函数的原型对象。



构造一个普通对象，我们先需要一个构造函数，然后在其原型对象上添加共享的方法和变量，通过new关键字生成此构造函数的实例，所有实例的\_\_proto\_\_属性就指向构造函数的原型对象。

 

那如何构造一个函数对象呢，比如function a，这个a函数对象，实际上跟上面是一样的，我们使用名为Function的构造函数，然后new它的实例，所有函数对象实际上是一个类型为Function的普通实例。

 

下面我们分析下一个字面量对象和一个函数对象它们的属性。

不管是字面量对象还是函数对象，它们肯定都有隐式原型属性\_\_proto\_\_，而只有函数对象才有prototype原型对象属性。

 

字面量对象实际上是使用Object()函数构造出来的对象，上面说过实例的\_\_proto\_\_实际指向的是构造函数的原型对象。所以字面量对象的\_\_proto\_\_属性指向Object()函数的原型对象。

 

函数对象实际上是使用Function()函数构造出来的对象，那么一个函数的\_\_proto\_\_属性指向Function()函数的原型对象。

 

在Chrome的控制台中声明一个函数后，取函数\_\_proto\_\_会输出“function() {[native code]}”, 这是因为函数对象的原型是通过引擎生成，无法输出相关信息。

![原型链](/assets/prototype.PNG)